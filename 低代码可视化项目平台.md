一、版本信息
软件版本
撰写时间
撰写人
操作系统

二、产品定位
旨在打造一种创新的开发工具，通过直观的可视化界面、预构建的组建和强大的集成能力，降低软件开发门槛

项目原动力：（1）与时俱进的工具型产品：在当今快速迭代的软件开发环境中，企业对开发效率与敏捷性的追求愈发迫切 ，响应市场变化和业务需求，提供一个数字化转型工具。（2）挖掘人的价值和潜力：搭建一个低门槛的开发平台，使得即便是非专业开发人员也能轻松参与到应用的创建与迭代中来。

三、功能说明
3.1 功能摘要说明
本版本主要实现「可视化大屏搭建」的核心能力，目标是让业务人员在无需编写代码的情况下完成数据连接、图表配置与可视化页面搭建。功能范围如下：
（1）可视化搭建器（页面编辑）：**提供所见即所得的编辑器**，支持组件拖拽、删除、复制、对齐、分组等基础操作。**支持网格布局系统**，提供吸附、自动对齐与比例缩放。**交互逻辑可配置**：组件间的点击跳转、筛选联动、数据联动事件。
（2）多数据源接入：支持配置 **MySQL / PostgreSQL / API / CSV / Excel** 等数据源。提供数据预览、字段映射、语句编辑校验与定时刷新。数据拉取方式支持：**实时查询 / 定时缓存**，可在 PRD 中定义“实时”的 SLA（如 ≤2s）。
（3）图表组件库：内置折线图、柱状图、饼图、地图、KPI 卡片等基础组件。支持自定义主题、配色、动画、数据绑定。图表行为支持：筛选、联动、下钻、tooltip 配置等。
（4）部署与权限管理：支持 **私有云 / 公有云 / 本地部署**，数据遵守公司安全策略。提供页面访问权限、编辑权限、数据权限控制。可生成分享链接或嵌入 iframe。
（5）非目标：不支持自定义脚本拓展。不支持多语言版本。不支持组件市场。不支持多人实时协同编辑。

四、主要业务、交互流程
4.1 角色与使用场景
（1）核心使用角色（较低开发能力）：
	1）业务人员 / 数据分析人员
	2）运营 / 管理层
（2）典型使用场景
	1）业务人员将分散的数据源接入平台
	2）通过拖拽组件完成可视化页面搭建
	3）配置图表与数据的绑定关系
	4）生成大屏并发布给管理层查看
4.2 核心业务流程总览
	完成可视化页面->配置数据源->数据字段映射与校验->拖拽组件并绑定数据->配置图表样式与交互->预览与调试->发布并配置权限->用户访问与数据刷新
4.3 详细业务流程拆解
	4.3.1 页面创建流程
		1）用户操作：进入可视化搭建器，点击创建页面，填写页面名称、描述，选择画布尺寸（如1920×1080/自定义），选择基础模版或空白页面
		2）系统逻辑：校验页面名称唯一性，初始化画布配置（grid、缩放比例、空组件状态），创建页面ID并进入编辑状态。
	4.3.2 数据源配置流程
		1）用户操作：进入数据源管理，选择数据源类型（MySQL, API， Excel，CSV，TXT，Word），填写连接信息（地址、端口、账号、库名等），点击测试连接，连接通过后保存数据源到配置文件。
		2） 系统逻辑：校验连接参数合法性，发起真实连接测试，记录数据源状态（成功/失败/禁用），存储为可复用的数据源配置。
	4.3.3 数据源与字段映射流程
		1）用户操作：选择已配置的数据源，选择或填写查询语句（SQL，API接口），预览返回字段，配置字段类型（数值，枚举，时间），设置字段别名、单位、精度，保存为数据集。
		2）系统逻辑：校验SQL/API合法性，执行试查询并返回数据样本，建立“原始字段-业务字段”的映射关系，作为后续图表统一的数据输入接口。
	4.3.4 组件拖拽与布局流程
		1) 用户操作：从组件库拖拽图表组件至画布，调整组件位置、大小。
		2) 系统操作：根据Grid规则计算坐标，试试更新组件layout schema，自动处理组件遮挡与层级关系
	4.3.5 数据绑定与图表配置流程
		1）用户操作：选中某个图表组件，选择绑定数据集，选择图表维度字段（X轴，Y轴），设置聚合方式（SUM，AVG，COUNT等），配置样式（颜色，单位），保存配置。
		2）系统逻辑：解析字段与聚合规则，生成图表渲染schema，调用数据接口获取真实数据，实时刷新预览。
	4.3.6 组件联动与交互配置流程
		1）用户操作：选择触发组件，配置交互行为（条件筛选，页面跳转），选择被影响的组件，。
		2）系统逻辑：建立组件间的事件映射关系，存储为交互规则schema，在运行态触发刷新。
	4.3.7 预览与调试流程
		1）用户操作：点击页面预览，模拟真实数据刷新，验证（数据是否准确，定时模式请求数据），记录异常日志与请求消耗。
		2）系统逻辑：走完整的数据拉取流程，按定时模式请求数据，记录异常日志与请求消耗。
	4.3.8 发布与权限配置流程
		1）用户操作：点击发布页面，配置访问权限（可查看人员，可编辑人员，可评论人员），选择部署方式（私有云，公有云，本地），生成访问链接。
		2）系统逻辑：冻结页面版本，生成发布版本ID，控制权限访问Token，返回访问地址。
	4.3.9 浏览与数据刷新流程（查看端）
		1）查看用户操作：打开访问链接，进入只读大屏模式，实时查看数据展示
		2）系统逻辑：校验访问权限，根据刷新策略（实时：按查询即取，定时：读取缓存数据），触发图表渲染。
4.4 异常与容错处理
	数据源连接失败 ->页面提示 + 日志记录
	查询超时（>SLA）-> 返回缓存数据或兜底提示
	字段缺失/类型不匹配 -> 禁止发布并标红提示
	权限不足 -> 禁止访问页面
4.5 本版本流程边界说明
	本版本仅支持单人编辑，不支持动人系统能够冲突处理，不支持运行动态脚本执行，不支持第三方组件市场接入。

五、功能需求
5.4 后端
【需求说明】
	旨在通过可视化流程节点，让业务人员无需编程即可完成业务逻辑设计与数据处理
【交互说明】
	用拖拽式流程节点，让业务人员能够：
	1. 数据处理（字段计算、合并、过滤等）
	2. 条件判断、循环执行
	3. 外部API调用与返回数据转换
	4. 数据表的增删改查
	5. 自定义触发器（前端事件、定时任务、表变更）
【可视化节点编排说明】
	6. 触发器
		1. 前端事件触发
			1. 按钮提交
			2. 表单提交
			3. 组件交互（选中/切换）
		2. 定时触发
			1. 秒/分/时/日周期
			2. 定时执行任务日志
		3. 数据表事件触发
			1. 新增
			2. 修改
			3. 删除
			4. 支持过滤条件（只有status=1才触发）
	7. 流程节点
		1. 条件判断节点（if-else)
			1. 支持多条件组合（&&/||）
			2. 支持字段、常量、表达式比较
		2.循环节点（for, foreach, while)
	8. 数据表操作节点
		1. CREATE
		2. UPDATE
		3. SELECT
		4. DELETE
		5. 支持WHERE/JOIN/LIMIT/ORDER/HAVING
	9. 外部API调用节点
		1. REST
		2. 内部服务调用
		3. Header/Query/Body配置
		4. 支持JSON path提取返回字段
	10. 数据转换节点
		1. 字段映射
		2. JSON解析/序列化
		3. 数据类型转换（string <-> int <-> datetime)
【数据结构与参数校验说明】
	11. 每个节点必须定义
		1. 输入参数
		2. 输出参数
		3. 数据类型校验
		4. 必填校验
		5. 字段映射关系
【流程执行与调试说明】
	12. 流程链路图（可折叠/展开节点)
	13. sbs debug
	14. 节点输入输出快照
	15. 错误节点高亮
【权限与安全说明】
	16. 节点可调用的数据表范围受权限限制
	17. 权限变更自动同步到调度引擎
	18. 外部API调用需要Token配置
	19. 敏感字段自动脱敏（如手机号、id）

六、改进意见


（1）前端页面设计可视化能力
（2）业务逻辑可视化设计
（3）数据模型设计可视化能力

（4）后端逻辑设计可视化能力维度
	重要性不言而喻
	1. 我参与的范围
	2. 我做出的贡献
	3. 我理解的功能本质
	4. 我与研发的沟通方式
	5. 指标
	6. 回答
		1. S：在我参与的低代码可视化平台中，我参与了后端可视化逻辑模块的需求分析与对应 PRD 编写，包括节点体系、触发器、数据处理、参数校验、调试链路等核心能力。以及在开发阶段设计多类型数据源（API、数据库、文件存储）的接入规范与配置流程设计，统一数据源管理入口，通过日志查询对数据库访问链路进行了优化。
		2. T：我参与的任务是：把后端的真实代码能力（逻辑控制、数据处理、API调用）抽象成业务人员可拖拽的节点体系，并写成结构化、可开发的 PRD。
		3. A：
			1. 在正式写功能之前，我与项目经理和研发确认了三类信息：
				1. 产品的业务场景：为什么需要后端可视化？谁在用？当前痛点是什么？
					1. 结论：业务人员不会写代码，但他们需要自己处理数据、调用接口、编辑逻辑。
				2. 需求优先级：哪些节点必须第一版就支持（if/loop/CRUD/API），哪些属于期望型（调试、权限）。
				3. 技术约束：后端引擎能解析哪些逻辑？能不能支持 JOIN？能不能跑 JSONPath？
			2. 这让我知道哪些能力是 **MVP 的最小可行功能**。
			3. 之后，我把需求抽象为 3 个基础能力 + 2 个期望能力：
				1. 基础能力（MVP）
					1. 触发器体系：逻辑从哪里开始
						1. 前端事件（按钮、表单提交、组件交互）
						2. 定时触发（秒/分/时/日）
						3. 数据表变更（新增/更新/删除 + 条件过滤）
				2. 节点体系：如何表达后端逻辑
					1. 条件判断节点
					2. 循环节点（for/while）
					3. CRUD 节点（WHERE/JOIN/HAVING 等）
					4. API 调用节点（REST + JSONPath）
				3. 参数与数据校验
					1. 输入/输出 schema
					2. 必填项校验
					3. 字段类型校验
					4. 字段映射能力
				4. 期望能力（V2或拓展能力）
					1. 调试能力
					2. 权限与安全
			4. 推动方案确认
				1. 我与其他研发同事进行了讨论，确保这些方案的技术可达性，包括：
					1. CRUD是否允许JOIN，引擎是否能解析？
					2. 循环节点是否需要上限防止死循环？
					3. JSONPath提取是否会造成性能瓶颈
					4. 触发器的事件格式与底层事件系统是否对齐
				2. 同时与测试一起确认
					1. 输出输入数据格式
					2. 错误态需要记录什么日志
					3. 节点执行快照如何展示
		4. R：
			1. 最终我输出了完整的 PRD 模块，包括：
				1. 触发器体系
				2. 节点体系（条件、循环、CRUD、API）
				3. 输入输出 schema 校验
				4. 一步步调试链路与节点快照
				5. 权限与敏感字段脱敏
			2. 推动对齐
				1. 并推动研发基于我定义的节点粒度与触发机制进行技术方案设计。
	7. 竞品分析中：
		1. 我做竞品分析时，从 **能力覆盖 → 技术抽象方式 → 用户门槛 → 场景适配性** 四个维度分析了宜搭和极态云：
			1. 宜搭：表单驱动，逻辑封装度高，易用但可扩展性弱
				1. 更适合中小企业简单流程
				2. 后端逻辑依赖表单本身，复用性弱
			2. 极态云：函数体系，和真实代码高度一致，可扩展性强
				1. 支持变量、循环、条件、函数调用
				2. 但要求用户理解编程思维，门槛更高
		2. 最后，我们确定：需要做一个操作灵活，对不懂编写代码的人来说门槛低的平台，因此采用节点体系 + schema 配置描述节点结构的方式，避免用户直接面对函数体，而是让所有能力被白名单化，提高功能易用性，同时保持节点拼装复用和扩展性。
		3. 目前节点体系以基础控制流为主，对于复杂数据操作逻辑仍有表达不足。业务人员能拖、能点，但无法表达「复杂算法」。
			1. 没有嵌套循环 + 条件判断
			2. 没有多分支流程
			3. 复杂聚合函数（GROUP BY）
			4. 状态机逻辑
			

